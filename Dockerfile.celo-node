# Build a docker image for users to run full nodes/validators
# Takes a build arg called celo_env to pre-download genesis block and static nodes
# docker build . -f Dockerfile.celo-node --build-arg celo_env=baklavastaging -t us.gcr.io/celo-testnet/celo-node:baklavastaging
# docker push us.gcr.io/celo-testnet/celo-node:baklavastaging
FROM us.gcr.io/celo-testnet/geth:51987ade2829aa73870eb4e26d4253e889388c1f

ARG celo_env

RUN apk add curl

RUN mkdir /celo

RUN curl https://www.googleapis.com/storage/v1/b/genesis_blocks/o/${celo_env}?alt=media > /celo/genesis.json

RUN curl https://www.googleapis.com/storage/v1/b/static_nodes/o/${celo_env}?alt=media > /celo/static-nodes.json
